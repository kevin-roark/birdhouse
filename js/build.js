(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(){"use strict";function r(r){return r>=48&&57>=r}function e(e,t){for(var o,i,f=(e+="").length,u=(t+="").length,c=0,l=0;f>c&&u>l;){var h=e.charCodeAt(c),C=t.charCodeAt(l);if(r(h)){if(!r(C))return h-C;for(var s=c,v=l;48===h&&++s<f;)h=e.charCodeAt(s);for(;48===C&&++v<u;)C=t.charCodeAt(v);for(var d=s,g=v;f>d&&r(e.charCodeAt(d));)++d;for(;u>g&&r(t.charCodeAt(g));)++g;var A=d-s,b=g-v;if(b>A)return-1;if(A>b)return 1;if(A){var p=e.slice(s,d),w=t.slice(v,g);if(w>p)return-1;if(p>w)return 1}c=d,l=g}else{if(h!==C)return a&&a>h&&a>C&&-1!==(o=n[h])&&-1!==(i=n[C])?o-i:h-C;++c,++l}}return f-u}var t,n,a=0;Object.defineProperties(String,{alphabet:{get:function(){return t},set:function(r){t=r,n=[];var e=0;if(t)for(;e<t.length;e++)n[t.charCodeAt(e)]=e;for(a=n.length,e=0;a>e;e++)e in n||(n[e]=-1)}},naturalCompare:{value:e,configurable:!0,writable:!0},naturalCaseCompare:{value:function(r,t){return e((""+r).toLowerCase(),(""+t).toLowerCase())},configurable:!0,writable:!0}})}();

},{}],2:[function(require,module,exports){
!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var n=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-n}}}();var TWEEN=TWEEN||function(){var n=[];return{getAll:function(){return n},removeAll:function(){n=[]},add:function(t){n.push(t)},remove:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1)},update:function(t){if(0===n.length)return!1;var r=0;for(t=void 0!==t?t:window.performance.now();r<n.length;)n[r].update(t)?r++:n.splice(r,1);return!0}}}();TWEEN.Tween=function(n){var t=n,r={},i={},o={},u=1e3,e=0,a=!1,f=!1,c=!1,s=0,h=null,l=TWEEN.Easing.Linear.None,p=TWEEN.Interpolation.Linear,E=[],w=null,v=!1,d=null,I=null,M=null;for(var m in n)r[m]=parseFloat(n[m],10);this.to=function(n,t){return void 0!==t&&(u=t),i=n,this},this.start=function(n){TWEEN.add(this),f=!0,v=!1,h=void 0!==n?n:window.performance.now(),h+=s;for(var u in i){if(i[u]instanceof Array){if(0===i[u].length)continue;i[u]=[t[u]].concat(i[u])}void 0!==r[u]&&(r[u]=t[u],r[u]instanceof Array==!1&&(r[u]*=1),o[u]=r[u]||0)}return this},this.stop=function(){return f?(TWEEN.remove(this),f=!1,null!==M&&M.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var n=0,t=E.length;t>n;n++)E[n].stop()},this.delay=function(n){return s=n,this},this.repeat=function(n){return e=n,this},this.yoyo=function(n){return a=n,this},this.easing=function(n){return l=n,this},this.interpolation=function(n){return p=n,this},this.chain=function(){return E=arguments,this},this.onStart=function(n){return w=n,this},this.onUpdate=function(n){return d=n,this},this.onComplete=function(n){return I=n,this},this.onStop=function(n){return M=n,this},this.update=function(n){var f,M,m;if(h>n)return!0;v===!1&&(null!==w&&w.call(t),v=!0),M=(n-h)/u,M=M>1?1:M,m=l(M);for(f in i)if(void 0!==r[f]){var g=r[f]||0,T=i[f];T instanceof Array?t[f]=p(T,m):("string"==typeof T&&(T=T.startsWith("+")||T.startsWith("-")?g+parseFloat(T,10):parseFloat(T,10)),"number"==typeof T&&(t[f]=g+(T-g)*m))}if(null!==d&&d.call(t,m),1===M){if(e>0){isFinite(e)&&e--;for(f in o){if("string"==typeof i[f]&&(o[f]=o[f]+parseFloat(i[f],10)),a){var O=o[f];o[f]=i[f],i[f]=O}r[f]=o[f]}return a&&(c=!c),h=n+s,!0}null!==I&&I.call(t);for(var N=0,W=E.length;W>N;N++)E[N].start(h+u);return!1}return!0}},TWEEN.Easing={Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return.5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return 0===n?0:Math.pow(1024,n-1)},Out:function(n){return 1===n?1:1-Math.pow(2,-10*n)},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){var t,r=.1,i=.4;return 0===n?0:1===n?1:(!r||1>r?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)))},Out:function(n){var t,r=.1,i=.4;return 0===n?0:1===n?1:(!r||1>r?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*n)*Math.sin((n-t)*(2*Math.PI)/i)+1)},InOut:function(n){var t,r=.1,i=.4;return 0===n?0:1===n?1:(!r||1>r?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),(n*=2)<1?-.5*(r*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)):r*Math.pow(2,-10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/i)*.5+1)}},Back:{In:function(n){var t=1.70158;return n*n*((t+1)*n-t)},Out:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},InOut:function(n){var t=2.5949095;return(n*=2)<1?.5*(n*n*((t+1)*n-t)):.5*((n-=2)*n*((t+1)*n+t)+2)}},Bounce:{In:function(n){return 1-TWEEN.Easing.Bounce.Out(1-n)},Out:function(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return.5>n?.5*TWEEN.Easing.Bounce.In(2*n):.5*TWEEN.Easing.Bounce.Out(2*n-1)+.5}}},TWEEN.Interpolation={Linear:function(n,t){var r=n.length-1,i=r*t,o=Math.floor(i),u=TWEEN.Interpolation.Utils.Linear;return 0>t?u(n[0],n[1],i):t>1?u(n[r],n[r-1],r-i):u(n[o],n[o+1>r?r:o+1],i-o)},Bezier:function(n,t){for(var r=0,i=n.length-1,o=Math.pow,u=TWEEN.Interpolation.Utils.Bernstein,e=0;i>=e;e++)r+=o(1-t,i-e)*o(t,e)*n[e]*u(i,e);return r},CatmullRom:function(n,t){var r=n.length-1,i=r*t,o=Math.floor(i),u=TWEEN.Interpolation.Utils.CatmullRom;return n[0]===n[r]?(0>t&&(o=Math.floor(i=r*(1+t))),u(n[(o-1+r)%r],n[o],n[(o+1)%r],n[(o+2)%r],i-o)):0>t?n[0]-(u(n[0],n[0],n[1],n[1],-i)-n[0]):t>1?n[r]-(u(n[r],n[r],n[r-1],n[r-1],i-r)-n[r]):u(n[o?o-1:0],n[o],n[o+1>r?r:o+1],n[o+2>r?r:o+2],i-o)},Utils:{Linear:function(n,t,r){return(t-n)*r+n},Bernstein:function(n,t){var r=TWEEN.Interpolation.Utils.Factorial;return r(n)/r(t)/r(n-t)},Factorial:function(){var n=[1];return function(t){var r=1;if(n[t])return n[t];for(var i=t;i>1;i--)r*=i;return n[t]=r,r}}(),CatmullRom:function(n,t,r,i,o){var u=.5*(r-n),e=.5*(i-t),a=o*o,f=o*a;return(2*t-2*r+u+e)*f+(-3*t+3*r-2*u-e)*a+u*o+t}}},function(n){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==n&&(n.TWEEN=TWEEN)}(this);

},{}],3:[function(require,module,exports){
module.exports={"path":"media/","videos":[{"filename":"bird0.mp4","duration":57.525,"volumeInfo":{"mean":-23.8,"max":-2.7},"tags":[]},{"filename":"bird1.mp4","duration":81.022,"volumeInfo":{"mean":-20.4,"max":0},"tags":[]},{"filename":"bus0.mp4","duration":45.045,"volumeInfo":{"mean":-20.9,"max":-0.3},"tags":[]},{"filename":"bus1.mp4","duration":60.027,"volumeInfo":{"mean":-28.5,"max":0},"tags":[]},{"filename":"bus2.mp4","duration":60.06,"volumeInfo":{"mean":-21.1,"max":-0.1},"tags":[]},{"filename":"bus3.mp4","duration":60.06,"volumeInfo":{"mean":-20.1,"max":-0.7},"tags":[]},{"filename":"bus4.mp4","duration":60.027,"volumeInfo":{"mean":-24.1,"max":-2.5},"tags":[]},{"filename":"bus5.mp4","duration":60.027,"volumeInfo":{"mean":-21.2,"max":-2.9},"tags":[]},{"filename":"bus6.mp4","duration":60.06,"volumeInfo":{"mean":-26.1,"max":-0.7},"tags":[]},{"filename":"bus7.mp4","duration":60.06,"volumeInfo":{"mean":-24.7,"max":-0.8},"tags":[]},{"filename":"bus8.mp4","duration":60.06,"volumeInfo":{"mean":-19.2,"max":-0.3},"tags":[]},{"filename":"bus9.mp4","duration":60.027,"volumeInfo":{"mean":-21.9,"max":-2.5},"tags":[]},{"filename":"bus10.mp4","duration":60.027,"volumeInfo":{"mean":-21.7,"max":-1.6},"tags":[]},{"filename":"bus11.mp4","duration":60.06,"volumeInfo":{"mean":-19.4,"max":-2.5},"tags":[]},{"filename":"bus12.mp4","duration":60.06,"volumeInfo":{"mean":-22,"max":-1.5},"tags":[]},{"filename":"bus13.mp4","duration":60.06,"volumeInfo":{"mean":-25.9,"max":-5.1},"tags":[]},{"filename":"bus14.mp4","duration":60.027,"volumeInfo":{"mean":-24.9,"max":-3.7},"tags":[]},{"filename":"bus15.mp4","duration":60.027,"volumeInfo":{"mean":-24.1,"max":-3.4},"tags":[]},{"filename":"bus16.mp4","duration":60.06,"volumeInfo":{"mean":-22.9,"max":-2.4},"tags":[]},{"filename":"bus17.mp4","duration":60.06,"volumeInfo":{"mean":-17.5,"max":-0.1},"tags":[]},{"filename":"car0.mp4","duration":53.022,"volumeInfo":{"mean":-19.5,"max":-0.3},"tags":[]},{"filename":"car1.mp4","duration":60.06,"volumeInfo":{"mean":-19.3,"max":0},"tags":[]},{"filename":"car2.mp4","duration":59.059,"volumeInfo":{"mean":-19.4,"max":0},"tags":[]},{"filename":"car3.mp4","duration":15.022,"volumeInfo":{"mean":-16.5,"max":-0.5},"tags":[]},{"filename":"car4.mp4","duration":60.06,"volumeInfo":{"mean":-15.8,"max":-0.1},"tags":[]},{"filename":"car5.mp4","duration":80.022,"volumeInfo":{"mean":-15.9,"max":-0.1},"tags":[]},{"filename":"construction0.mp4","duration":60.027,"volumeInfo":{"mean":-23.4,"max":-5.8},"tags":[]},{"filename":"construction1.mp4","duration":60.06,"volumeInfo":{"mean":-21.8,"max":-6},"tags":[]},{"filename":"construction2.mp4","duration":60.06,"volumeInfo":{"mean":-22.6,"max":-6},"tags":[]},{"filename":"construction3.mp4","duration":60.027,"volumeInfo":{"mean":-21.6,"max":-2.4},"tags":[]},{"filename":"construction4.mp4","duration":60.027,"volumeInfo":{"mean":-21.8,"max":-1.6},"tags":[]},{"filename":"construction5.mp4","duration":60.06,"volumeInfo":{"mean":-29.3,"max":-10.1},"tags":[]},{"filename":"construction6.mp4","duration":60.06,"volumeInfo":{"mean":-21.5,"max":-6.6},"tags":[]},{"filename":"construction7.mp4","duration":60.06,"volumeInfo":{"mean":-23.7,"max":-8.5},"tags":[]},{"filename":"construction8.mp4","duration":60.027,"volumeInfo":{"mean":-23.7,"max":-7.2},"tags":[]},{"filename":"construction9.mp4","duration":60.027,"volumeInfo":{"mean":-22.8,"max":-7.4},"tags":[]},{"filename":"construction10.mp4","duration":42.042,"volumeInfo":{"mean":-23.9,"max":-9.7},"tags":[]},{"filename":"food0.mp4","duration":60.027,"volumeInfo":{"mean":-21.7,"max":-0.1},"tags":[]},{"filename":"hardcore0.mp4","duration":60.027,"volumeInfo":{"mean":-13.8,"max":-0.9},"tags":[]},{"filename":"hardcore1.mp4","duration":60.06,"volumeInfo":{"mean":-14.7,"max":-0.1},"tags":[]},{"filename":"hardcore2.mp4","duration":60.06,"volumeInfo":{"mean":-14.3,"max":-0.5},"tags":[]},{"filename":"hardcore3.mp4","duration":70.022,"volumeInfo":{"mean":-14.2,"max":-1.1},"tags":[]},{"filename":"hardcore4.mp4","duration":60.027,"volumeInfo":{"mean":-16.5,"max":-0.3},"tags":[]}],"audio":[],"frames":[]}
},{}],4:[function(require,module,exports){
"use strict";!function(){function t(o){function e(t,o){var e,n,r;switch(o){case"left":e=7.5*Math.random()+5,n=7.5*Math.random()+5,r=50;break;case"center":r=15*Math.random()+80,e=(100-r)/2,n=e;break;case"right":e=7.5*Math.random()+36.5,n=7.5*Math.random()+26.5,r=50}t.setLeft(e+"%").setTop(n+"%").setWidth(r+"%")}function r(t){var o=Math.min(t.getDuration(),10),e=.35,n=Math.pow(Math.random(),2.1)*(o-e)+e,r=t.getDuration()-n,a=Math.random()*r;t.setDuration(n).setStartTime(a)}var u=i.randomVideoWithTag(n.util.choice(c)),h=new n.VideoSegment(u);h.setVolume(0),e(h,n.util.choice(s)),r(h),h.onStart=function(){var o=250+8e3*Math.pow(Math.random(),3),e=h.msDuration()+o;t(e)},a.scheduleSegmentRender(h,o)}function o(t){function e(t){var o=75*Math.random()+5,e=75*Math.random()+5;t.setLeft(o+"%").setTop(e+"%");var n=Math.floor(48*Math.random())+48;t.setFontSize(n+"px")}function r(t){var o=.5*Math.random()+.25;t.setDuration(o)}var i=n.util.choice(u),c=new n.TextSegment({text:i,z:1});e(c),r(c),c.onStart=function(){var t=250+750*Math.random(),e=c.msDuration()+t;o(e)},a.scheduleSegmentRender(c,t)}var e=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if(!e)return void console.log("only chrome is supported for now...");var n=require("../../src/web-frampton"),r=require("./media_config.json"),a=new n.WebRenderer({mediaConfig:r,videoSourceMaker:function(t){return"/source/"+t}}),i=new n.Tagger(r),c=["bus","bus","bus","bus","construction","construction","construction","construction","construction","construction","construction","construction","construction","construction","bird","bird","bird","food","food","hardcore","hardcore","car","car","car","car"];c.forEach(function(t){i.tagVideosWithPattern(t,t)});var u="spread your wings and fly away to a righteous mountain so only you can touch the peak after touch peak dive from top of mountain through sky air plummeting towards ground that are too high ever reach".split(" "),s=["left","center","center","right"];t(2e3),o(3e3)}();

},{"../../src/web-frampton":26,"./media_config.json":3}],5:[function(require,module,exports){
"use strict";function _mediaSortedWithComparator(e,r){if(!e||!r)return[];var t=copiedMedia(e);return t.sort(r),t}function copiedMedia(e){if(!e)return[];for(var r=[],t=0;t<e.length;t++)r.push(e[t]);return r}var util=require("./util");require("string-natural-compare"),module.exports.frequencyWeightedMedia=function(e){if(!e)return[];for(var r=[],t=0;t<e.length;t++)for(var n=e[t],o=void 0!==n.frequency?n.frequency:5,a=0;o>a;a++)r.push(n);return util.shuffle(r)},module.exports.durationSortedMedia=function(e,r){return _mediaSortedWithComparator(e,function(e,t){var n=e.duration||0,o=t.duration||0;return r?o-n:n-o})},module.exports.volumeSortedMedia=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t=r.descending||!1,n=r.useMax||!1;return _mediaSortedWithComparator(e,function(e,r){var o=e.volumeInfo?n?e.volumeInfo.max:e.volumeInfo.mean:-20,a=r.volumeInfo?n?r.volumeInfo.max:r.volumeInfo.mean:-20;return t?a-o:o-a})},module.exports.naturalLanguageSortedMedia=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t=r.descending||!1,n=r.caseSensitive||!1,o=n?String.naturalCompare:String.naturalCaseCompare;return _mediaSortedWithComparator(e,function(e,r){var n=o(e.filename,r.filename);return t?-n:n})},module.exports.mediaSortedWithComparator=_mediaSortedWithComparator;

},{"./util":8,"string-natural-compare":1}],6:[function(require,module,exports){
"use strict";function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function stripExtension(n){var e=n.lastIndexOf(".");return n.substring(0,e)}var _createClass=function(){function n(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}}();module.exports=function(){function n(e){_classCallCheck(this,n),this.mediaConfig=e}return _createClass(n,[{key:"findVideoWithPatern",value:function(n){for(var e=this.mediaConfig.videos,r=0;r<e.length;r++){var t=e[r];if(t.filename.indexOf(n)>=0)return t}return null}},{key:"findAudioHandleForVideo",value:function(n){var e=stripExtension(n.filename||n),r=this.mediaConfig.audio;if(!r||0===r.length)return null;for(var t=0;t<r.length;t++){var i=r[t];if(e===stripExtension(i.filename))return i}return null}}]),n}();

},{}],7:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),util=require("./util");module.exports=function(){function e(t){_classCallCheck(this,e),this.mediaConfig=t;for(var a=this.mediaConfig.videos,i=0;i<a.length;i++){var s=a[i];s.tags||(s.tags=[])}this.buildTagMap()}return _createClass(e,[{key:"buildTagMap",value:function(){for(var e={},t=this.mediaConfig.videos,a=0;a<t.length;a++){var i=t[a],s=i.tags;if(s)for(var n=0;n<s.length;n++){var u=s[n],r=e[u];r||(r=[],e[u]=r),r.push(i)}}this.tagMap=e}},{key:"videosWithTag",value:function(e,t){var a=this.tagMap[e]||[];return t&&t.shuffle&&(a=util.shuffle(a)),t&&t.limit&&(a=a.slice(0,t.limit)),a}},{key:"videosWithoutTag",value:function(e,t){for(var a=[],i=this.mediaConfig.videos,s=0;s<i.length;s++){var n=i[s];this.videoHasTag(n,e)||a.push(e)}return t&&t.shuffle&&(a=util.shuffle(a)),t&&t.limit&&(a=a.slice(0,t.limit)),a}},{key:"randomVideoWithTag",value:function(e){var t=this.videosWithTag(e);return util.choice(t)}},{key:"videoSequenceFromTagSequence",value:function(e){for(var t=[],a=0;a<e.length;a++){var i=e[a],s=this.randomVideoWithTag(i);s&&t.push(s)}return t}},{key:"videoHasTag",value:function(e,t){if(!e)return!1;for(var a=e.filename||e,i=this.videosWithTag(t),s=0;s<i.length;s++)if(i[s].filename===a)return!0;return!1}},{key:"tagVideosWithPattern",value:function(e,t){for(var a=this.mediaConfig.videos,i=0;i<a.length;i++){var s=a[i];s.filename.indexOf(e)>=0&&s.tags.push(t)}this.buildTagMap()}},{key:"tagVideosWithQualitativeLength",value:function(){for(var e=this.mediaConfig.videos,t=0;t<e.length;t++){var a=e[t],i=a.duration;.3>i?(a.tags.push("short"),a.tags.push("short1")):1>i?(a.tags.push("short"),a.tags.push("short2")):3>i?(a.tags.push("med"),a.tags.push("med1")):5>i?(a.tags.push("med"),a.tags.push("med2")):10>i?(a.tags.push("long"),a.tags.push("long1")):30>i?(a.tags.push("long"),a.tags.push("long2")):(a.tags.push("long"),a.tags.push("long3"))}this.buildTagMap()}}]),e}();

},{"./util":8}],8:[function(require,module,exports){
"use strict";function choice(r){var n=Math.floor(Math.random()*r.length);return r[n]}function shuffle(r){for(var n=new Array(r.length),t=0;t<r.length;t++)n[t]=r[t];return n.sort(function(){return.5-Math.random()}),n}function randInt(r,n){return r||(r=1),n||(n=1e3),Math.floor(Math.random()*(n-r))+r}function splitArray(r,n){for(var t=[],e=[],h=0;h<r.length;h++)e.push(r[h]),e.length===n&&(t.push(e),e=[]);return e.length>0&&t.push(e),t}module.exports={choice:choice,shuffle:shuffle,randInt:randInt,splitArray:splitArray};

},{}],9:[function(require,module,exports){
"use strict";module.exports={VideoSegment:require("./segment/video-segment"),ImageSegment:require("./segment/image-segment"),ColorSegment:require("./segment/color-segment"),AudioSegment:require("./segment/audio-segment"),TextSegment:require("./segment/text-segment"),SequencedSegment:require("./segment/sequenced-segment"),StackedSegment:require("./segment/stacked-segment"),finiteLoopingSegment:require("./segment/finite-looping-segment"),sequencedSegmentFromFrames:require("./segment/sequenced-segment-from-frames"),Renderer:require("./renderer/renderer"),Tagger:require("./etc/tagger"),MediaFinder:require("./etc/media-finder"),mediaArranger:require("./etc/media-arranger"),util:require("./etc/util")};

},{"./etc/media-arranger":5,"./etc/media-finder":6,"./etc/tagger":7,"./etc/util":8,"./renderer/renderer":11,"./segment/audio-segment":14,"./segment/color-segment":15,"./segment/finite-looping-segment":16,"./segment/image-segment":17,"./segment/sequenced-segment":21,"./segment/sequenced-segment-from-frames":20,"./segment/stacked-segment":22,"./segment/text-segment":23,"./segment/video-segment":24}],10:[function(require,module,exports){
"use strict";module.exports.setTransition=function(t,i){t.style.webkitTransition=i,t.style.transition=i};

},{}],11:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function compareScheduledUnits(e,n){var t=e.offset||0,r=n.offset||0;return t-r}function getInsertionIndex(e,n,t){if(0===e.length)return 0;for(var r=0,o=e.length-1;o>=r;){var a=Math.floor((r+o)/2),i=t(e[a],n);if(0>i)r=a+1;else{if(!(i>0))return a;o=a-1}}return r}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();module.exports=function(){function e(n){_classCallCheck(this,e),this.mediaConfig=n.mediaConfig,this.outputFilepath=void 0!==n.outputFilepath?n.outputFilepath:"out/",this.log=n.log||!1,this.audioFadeDuration=n.audioFadeDuration,this.videoFadeDuration=n.videoFadeDuration,this.log&&console.log("frampton is starting now...")}return _createClass(e,[{key:"scheduleSegmentRender",value:function(e,n){var t=e.associatedSegments();if(t)for(var r=0;r<t.length;r++){var o=n+1e3*t[r].offset;this.scheduleSegmentRender(t[r].segment,o)}}},{key:"insertScheduledUnit",value:function(e,n){var t=getInsertionIndex(n,e,compareScheduledUnits);n.splice(t,0,e)}},{key:"renderVideoSegment",value:function(){}},{key:"renderImageSegment",value:function(){}},{key:"renderColorSegment",value:function(){}},{key:"renderAudioSegment",value:function(){}},{key:"renderTextSegment",value:function(){}},{key:"renderSegment",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];switch(e.segmentType){case"video":this.renderVideoSegment(e,n);break;case"image":this.renderImageSegment(e,n);break;case"color":this.renderColorSegment(e,n);break;case"audio":this.renderAudioSegment(e,n);break;case"text":this.renderTextSegment(e,n);break;case"sequence":this.renderSequencedSegment(e,n);break;case"stacked":this.renderStackedSegment(e,n);break;default:console.log("unhandled sequence type: "+e.segmentType)}}},{key:"renderSequencedSegment",value:function(e,n){var t=this,r=n.offset,o=void 0===r?0:r;e.segments.forEach(function(n,r){t.scheduleSegmentRender(n,o),o+=n.msDuration()+e.msVideoOffset(),0===r?t.overrideOnStart(n,function(){e.didStart()}):r===e.segmentCount()-1&&t.overrideOnComplete(n,function(){e.cleanup()})})}},{key:"renderStackedSegment",value:function(e,n){var t=this,r=n.offset,o=void 0===r?0:r;e.segments.forEach(function(n,r){var a=o+e.msSegmentOffset(r);t.scheduleSegmentRender(n,a),0===r&&t.overrideOnStart(n,function(){e.didStart()})});var a=e.lastSegment();this.overrideOnComplete(a,function(){e.cleanup()})}},{key:"overrideOnStart",value:function(e,n){var t=e.onStart;e.onStart=function(){t&&t(),e.onStart=t,n()}}},{key:"overrideOnComplete",value:function(e,n){var t=e.onComplete;e.onComplete=function(){t&&t(),e.onComplete=t,n()}}}]),e}();

},{}],12:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();module.exports=function(){function e(t,n){_classCallCheck(this,e),this.segment=t,this.offset=n}return _createClass(e,[{key:"toString",value:function(){return Math.round(100*this.offset)/100+": "+this.segment.simpleName()+" for "+this.segment.getDuration()}}]),e}();

},{}],13:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),_get=function e(t,o,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in a)return a.value;var r=a.get;if(void 0!==r)return r.call(n)},TWEEN=require("tween.js"),Renderer=require("./renderer"),ScheduledUnit=require("./scheduled-unit"),dahmer=require("./dahmer"),TimePerFrame=16.67;module.exports=function(e){function t(e){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return o.timeToLoadVideo=e.timeToLoadVideo||4e3,o.startDelayCorrection=e.startDelayCorrection||1.8,o.startPerceptionCorrection=e.startPerceptionCorrection||13,o.videoSourceMaker=void 0!==e.videoSourceMaker?e.videoSourceMaker:function(e){return o.mediaConfig.path+e},o.domContainer=document.body,o.scheduledRenders=[],o.updateFunctions=[],o.videosPlayed=0,o.meanStartDelay=0,o.lastUpdateTime=0,o.update(),o}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){window.requestAnimationFrame(this.update.bind(this)),TWEEN.update(e);var t=window.performance.now(),o=t-this.lastUpdateTime;this.lastUpdateTime=t;for(var n=this.timeToLoadVideo+TimePerFrame,a=this.scheduledRenders,i=[],r=0;r<a.length;r++){var l=a[r],s=l.offset-t;if(!(n>s))break;i.push({segment:l.segment,options:{offset:Math.max(s,0)}})}if(i.length>0)for(a.splice(0,i.length),r=0;r<i.length;r++){var u=i[r];this.renderSegment(u.segment,u.options)}for(r=0;r<this.updateFunctions.length;r++)this.updateFunctions[r].fn(o)}},{key:"addUpdateFunction",value:function(e){var t=""+Math.floor(1e9*Math.random());return this.updateFunctions.push({identifier:t,fn:e}),t}},{key:"removeUpdateFunctionWithIdentifier",value:function(e){for(var t=-1,o=0;o<this.updateFunctions.length;o++)if(this.updateFunctions[o].identifier===e){t=o;break}t>=0&&this.updateFunctions.splice(t,1)}},{key:"scheduleSegmentRender",value:function(e,o){_get(Object.getPrototypeOf(t.prototype),"scheduleSegmentRender",this).call(this,e,o);var n=window.performance.now()+o,a=new ScheduledUnit(e,n);this.insertScheduledUnit(a,this.scheduledRenders)}},{key:"renderVideoSegment",value:function(e,t){function o(){l.play(),l.style.display=u;var t=e.videoFadeDuration||r.videoFadeDuration;if(t){t=Math.min(t,d/2),l.style.opacity=0;var o="opacity "+t+"ms";dahmer.setTransition(l,o),setTimeout(function(){l.style.opacity=e.opacity},1),setTimeout(function(){l.style.opacity=0},d-t)}else r.setVisualSegmentOpacity(e,l);var n=e.audioFadeDuration||r.audioFadeDuration;n&&(n=Math.min(n,d/2),l.volume=0,new TWEEN.Tween(l).to({volume:e.volume},n).start(),setTimeout(function(){new TWEEN.Tween(l).to({volume:0},n).start()},d-n)),e.didStart()}function n(){if(r.log){var t=window.performance.now(),o=c+d;console.log(t+": finish "+s+" | end delay: "+(t-o))}e.loop?(l.pause(),l.currentTime=e.startTime,l.play(),setTimeout(n,d)):(l.parentNode.removeChild(l),l.src="",e.cleanup())}var a=t.offset,i=void 0===a?0:a,r=this,l=document.createElement("video");l.preload=!0,l.className="frampton-video";var s=l.canPlayType("video/mp4").length>0?e.filename:e.extensionlessName()+".webm";l.src=this.videoSourceMaker(s),l.style.zIndex=e.z,e.width&&(l.style.width=l.style.height=e.width),e.top&&(l.style.top=e.top),e.left&&(l.style.left=e.left),l.volume=e.volume,e.addChangeHandler("volume",function(e){l.volume=e}),l.currentTime=e.startTime,l.playbackRate=e.playbackRate,e.addChangeHandler("playbackRate",function(e){l.playbackRate=e});var u=l.style.display||"block";l.style.display="none",this.domContainer.appendChild(l);var d=e.msDuration(),c=window.performance.now()+i;l.addEventListener("playing",function(){var e=window.performance.now(),t=e+r.startPerceptionCorrection-c,o=d;t>r.startPerceptionCorrection&&(o-=t),setTimeout(n,o),r.videosPlayed+=1,1===r.videosPlayed?r.meanStartDelay=t:(r.meanStartDelay=(r.meanStartDelay*(r.videosPlayed-1)+t)/r.videosPlayed,Math.abs(r.meanStartDelay>1)&&(r.meanStartDelay>.05&&r.startDelayCorrection<3?r.startDelayCorrection+=.05:r.meanStartDelay<-.05&&r.startDelayCorrection>.05&&(r.startDelayCorrection-=.05))),r.log&&(console.log(e+": start "+s+" | duration "+d+" | start delay "+t),console.log("start correction "+r.startDelayCorrection+" | mean delay "+r.meanStartDelay))},!1),setTimeout(o,i-this.startDelayCorrection-this.startPerceptionCorrection)}},{key:"renderTextSegment",value:function(e,t){function o(){l.style.display="block",r.setVisualSegmentOpacity(e,l),e.didStart()}function n(){l.parentNode.removeChild(l),e.cleanup()}var a=t.offset,i=void 0===a?0:a,r=this,l=document.createElement("div");l.className="frampton-text",l.style.fontFamily=e.font,l.style.fontSize=e.fontSize,l.style.zIndex=e.z,l.style.textAlign=e.textAlignment,l.style.color=e.color,e.maxWidth&&(l.style.maxWidth=e.maxWidth),e.top&&(l.style.top=e.top),e.left&&(l.style.left=e.left),l.textContent=e.text,l.style.display="none",this.domContainer.appendChild(l),setTimeout(o,i),setTimeout(n,i+e.msDuration())}},{key:"renderColorSegment",value:function(e,t){function o(){function t(t){var o=t+c,a=Math.floor(o/i);if(d+=a,c=o-a*i,d>=e.numberOfColors()){if(!e.loop)return void n(m);d-=e.numberOfColors()}l.style.backgroundColor=e.rgb(e.getColor(d)),r.log&&console.log(window.performance.now()+": displaying frame "+d+" for color segment - "+e.simpleName())}function a(){i=e.msDuration()/e.numberOfColors()}if(!e.framesData)return void(u=function(){o()});r.log&&console.log("displaying colors for: "+e.filename),l.style.display=s,r.setVisualSegmentOpacity(e,l),e.didStart();var i,d=0===e.startTime?0:Math.floor(1e3*e.startTime/i),c=0;a(),t(0),e.addChangeHandler("playbackRate",a);var m=r.addUpdateFunction(t);r.log&&console.log(window.performance.now()+": started color segment - "+e.simpleName())}function n(t){l.parentNode.removeChild(l),e.cleanup(),r.removeUpdateFunctionWithIdentifier(t),r.log&&console.log(window.performance.now()+": finished color segment - "+e.simpleName())}var a=t.offset,i=void 0===a?0:a,r=this,l=document.createElement("div");l.className="frampton-video",l.style.zIndex=e.z,e.width&&(l.style.width=l.style.height=e.width),e.top&&(l.style.top=e.top),e.left&&(l.style.left=e.left),e.transitionBetweenColors&&(l.style.transition="background-color 5ms");var s=l.style.display||"block";l.style.display="none",this.domContainer.appendChild(l);var u;e.framesData||(this.log&&console.log("loading color frames for: "+e.filename),this.getJSON(this.videoSourceMaker(e.filename),function(t){e.setFramesData(t),u&&u(),u=null})),i>0?setTimeout(o,i):o()}},{key:"renderAudioSegment",value:function(e,t){e.preferHTMLAudio||t.preferHTMLAudio||this.preferHTMLAudio?this.renderAudioSegmentWithHTMLAudio(e,t):this.renderAudioSegmentWithWebAudio(e,t)}},{key:"renderAudioSegmentWithWebAudio",value:function(e,t){var o=t.offset,n=void 0===o?0:o,a=this,i=window.AudioContext||window.webkitAudioContext,r=new i,l=r.createBufferSource(),s=r.currentTime+n/1e3,u=r.createGain();u.connect(r.destination),e.addChangeHandler("volume",function(e){u.gain.value=e}),e.fadeInDuration?(u.gain.linearRampToValueAtTime(0,s),u.gain.linearRampToValueAtTime(e.volume,s+e.fadeInDuration)):u.gain.value=e.volume,e.fadeOutDuration&&(u.gain.linearRampToValueAtTime(e.volume,s+e.getDuration()-e.fadeOutDuration),u.gain.linearRampToValueAtTime(0,s+e.getDuration())),l.start(s,e.startTime,e.getDuration());var d=new XMLHttpRequest;d.open("GET",this.videoSourceMaker(e.filename),!0),d.responseType="arraybuffer",d.onload=function(){var t=d.response;r.decodeAudioData(t,function(t){l.buffer=t,l.connect(u),l.loop=e.loop,e.loop&&(l.loopStart=e.startTime,l.loopEnd=e.endTime()),l.playbackRate.value=e.playbackRate,e.addChangeHandler("playbackRate",function(e){l.playbackRate.value=e})},function(e){a.log&&console.log("audio decoding erorr: "+e.err)})},d.send()}},{key:"renderAudioSegmentWithHTMLAudio",value:function(e,t){function o(){l.play();var t=1e3*e.fadeInDuration||r.audioFadeDuration;t&&(t=Math.min(t,s/2),l.volume=0,new TWEEN.Tween(l).to({volume:e.volume},t).start());var o=1e3*e.fadeOutDuration||r.audioFadeDuration;o&&setTimeout(function(){new TWEEN.Tween(l).to({volume:0},o).start()},s-o),r.log&&console.log("started playing audio for: "+e.filename),e.didStart()}function n(){e.loop?(l.pause(),l.currentTime=e.startTime,l.play(),setTimeout(n,s)):(l.src="",e.cleanup())}var a=t.offset,i=void 0===a?0:a,r=this,l=document.createElement("audio");l.preload=!0,l.src=this.videoSourceMaker(e.filename),l.currentTime=e.startTime,l.playbackRate=e.playbackRate,e.addChangeHandler("playbackRate",function(e){l.playbackRate=e}),l.volume=e.volume,e.addChangeHandler("volume",function(e){l.volume=e});var s=e.msDuration(),u=window.performance.now()+i;l.addEventListener("playing",function(){var t=window.performance.now(),o=t+r.startPerceptionCorrection-u,a=s;o>r.startPerceptionCorrection&&(a-=o),setTimeout(n,a),r.log&&console.log("audio is playing for "+e.filename)},!1),setTimeout(o,i-this.startPerceptionCorrection)}},{key:"setVisualSegmentOpacity",value:function(e,t){1!==e.opacity&&(t.style.opacity=e.opacity),e.addChangeHandler("opacity",function(e){t.style.opacity=e})}},{key:"getJSON",value:function(e,t){if(t){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(){var e=JSON.parse(o.responseText);t(e)},o.send()}}}]),t}(Renderer);

},{"./dahmer":10,"./renderer":11,"./scheduled-unit":12,"tween.js":2}],14:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},MediaSegment=require("./media-segment");module.exports=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.segmentType="audio",n.volume=e.volume||.8,n.fadeInDuration=e.fadeInDuration,n.fadeOutDuration=e.fadeOutDuration||n.fadeInDuration,n}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e){return _get(Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),this.volume=e.volume,this.fadeInDuration=e.fadeInDuration,this.fadeOutDuration=e.fadeOutDuration,this}},{key:"clone",value:function(){return new t({}).copy(this)}},{key:"setVolume",value:function(e){return this.volume=e,this.notifyChangeHandlers("volume",e),this}},{key:"setFadeDuration",value:function(e){return this.setFadeInDuration(e).setFadeOutDuration(e)}},{key:"setFadeInDuration",value:function(e){return this.fadeInDuration=e,this}},{key:"setFadeOutDuration",value:function(e){return this.fadeOutDuration=e,this}},{key:"simpleName",value:function(){return"audio - "+this.filename}}]),t}(MediaSegment);

},{"./media-segment":18}],15:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},VisualSegment=require("./visual-segment");module.exports=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return r.segmentType="color",r.fps=e.fps,r.numberOfFrames=e.numberOfFrames,r.framesData=e.framesData,r.transitionBetweenColors=e.transitionBetweenColors||!1,r}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e){return _get(Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),this.fps=e.fps,this.numberOfFrames=e.numberOfFrames,this.framesData=e.framesData,this.transitionBetweenColors=e.transitionBetweenColors,this}},{key:"clone",value:function(){return new t({}).copy(this)}},{key:"setColors",value:function(e){return this.colors=e,this}},{key:"setFramesData",value:function(e){return this.framesData=e.frames?e.frames:e,this}},{key:"simpleName",value:function(){return"color - "+this.filename}},{key:"numberOfColors",value:function(){return this.numberOfFrames?this.numberOfFrames:this.framesData?this.framesData.length:0}},{key:"getColor",value:function(e){if(!this.framesData)return null;var t=this.framesData[e].colors;return t.dominant}},{key:"getPalette",value:function(e){if(!this.framesData)return null;var t=this.framesData[e].colors;return t.palette}},{key:"rgb",value:function(e){return e?"rgb("+e[0]+","+e[1]+","+e[2]+")":"rgb(0, 0, 0)"}}]),t}(VisualSegment);

},{"./visual-segment":25}],16:[function(require,module,exports){
"use strict";var SequencedSegment=require("./sequenced-segment");module.exports=function(e){for(var n=arguments.length<=1||void 0===arguments[1]?1:arguments[1],t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=[],u=0;n>u;u++)r.push(e.clone());t.segments=r;var s=new SequencedSegment(t);return s};

},{"./sequenced-segment":21}],17:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},VisualSegment=require("./visual-segment");module.exports=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return r.segmentType="image",r}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e){return _get(Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),this}},{key:"clone",value:function(){return new t({}).copy(this)}},{key:"simpleName",value:function(){return"image - "+this.filename}}]),t}(VisualSegment);

},{"./visual-segment":25}],18:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_get=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},Segment=require("./segment");module.exports=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,t));return i.segmentType="media",i.filename=t.filename,i.mediaDuration=t.duration,i.startTime=t.startTime||0,i.duration=i.mediaDuration-i.startTime,i.playbackRate=t.playbackRate||1,i.loop=t.loop||!1,i}return _inherits(e,t),_createClass(e,[{key:"copy",value:function(t){return _get(Object.getPrototypeOf(e.prototype),"copy",this).call(this,t),this.filename=t.filename,this.mediaDuration=t.mediaDuration,this.startTime=t.startTime,this.duration=t.duration,this.playbackRate=t.playbackRate,this.loop=t.loop,this}},{key:"clone",value:function(){return new e({}).copy(this)}},{key:"setFilename",value:function(t){return this.filename=t,this}},{key:"setEndTime",value:function(t){return this.startTime=t-this.duration,this}},{key:"setStartTime",value:function(t){return this.startTime=t,this.duration=Math.min(this.duration,this.mediaDuration-t),this}},{key:"setDuration",value:function(t,e){this.duration=Math.min(t,this.mediaDuration);var i=this.mediaDuration-this.duration;return(e||this.startTime>i)&&(this.startTime=i),this}},{key:"setPlaybackRate",value:function(t){return this.playbackRate=t,this.notifyChangeHandlers("playbackRate",t),this}},{key:"setLoop",value:function(t){return this.loop=t,this}},{key:"extensionlessName",value:function(){return this.filename.substring(0,this.filename.lastIndexOf("."))}},{key:"endTime",value:function(){return this.startTime+this.duration}},{key:"getDuration",value:function(){return this.duration/this.playbackRate}},{key:"msStartTime",value:function(){return 1e3*this.startTime}},{key:"msEndTime",value:function(){return 1e3*this.endTime()}}]),e}(Segment);

},{"./segment":19}],19:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();module.exports=function(){function e(n){_classCallCheck(this,e),this.onStart=n.onStart,this.onComplete=n.onComplete,this.changeHandlers={}}return _createClass(e,[{key:"copy",value:function(e){return this.onStart=e.onStart,this.onComplete=e.onComplete,this}},{key:"clone",value:function(){return new e({}).copy(this)}},{key:"didStart",value:function(){this.onStart&&(this.onStart(),this.onStart=void 0)}},{key:"cleanup",value:function(){this.onComplete&&(this.onComplete(),this.onComplete=void 0)}},{key:"addChangeHandler",value:function(e,n){var t=this.getChangeHandlers(e);t.push(n)}},{key:"notifyChangeHandlers",value:function(e,n){for(var t=this.getChangeHandlers(e),a=0;a<t.length;a++)t[a](n)}},{key:"getChangeHandlers",value:function(e){var n=this.changeHandlers[e];return void 0!==n?n:(n=[],this.changeHandlers[e]=n,n)}},{key:"getDuration",value:function(){return 0}},{key:"msDuration",value:function(){return 1e3*this.getDuration()}},{key:"simpleName",value:function(){return"plain segment"}},{key:"associatedSegments",value:function(){return null}}]),e}();

},{}],20:[function(require,module,exports){
"use strict";var VideoSegment=require("./video-segment"),ImageSegment=require("./image-segment"),SequencedSegment=require("./sequenced-segment");module.exports=function(e){for(var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.firstFrameIndex||0,t=n.numberOfFrames||e.frames.length,m=n.cutVideos||!1,s=1/e.fps,a=[],i=r;t>i;i++){var g=e.frames[i];if(m){var u=new VideoSegment(e);u.setStartTime(g.timecode).setDuration(s),a.push(u)}else{var d=new ImageSegment({filename:g.imageFilename,duration:s});a.push(d)}}n.segments=a;var o=new SequencedSegment(n);return o};

},{"./image-segment":17,"./sequenced-segment":21,"./video-segment":24}],21:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},Segment=require("./segment");module.exports=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.segmentType="sequence",n.segments=e.segments||[],n.videoOffset=e.videoOffset||0,n}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e,n){_get(Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),this.segments=[];for(var r=0;r<e.segments.length;r++){var o=e.segments[r];this.segments.push(n?o.clone():o)}return this}},{key:"clone",value:function(){return(new t).copy(this,!0)}},{key:"getSegment",value:function(e){return this.segments[e]}},{key:"segmentCount",value:function(){return this.segments.length}},{key:"getDuration",value:function(){for(var e=0,t=0;t<this.segments.length-1;t++)e+=this.segments[t].getDuration()-this.videoOffset;var n=e+this.segments[this.segments.length-1].getDuration();return n}},{key:"msVideoOffset",value:function(){return 1e3*this.videoOffset}}]),t}(Segment);

},{"./segment":19}],22:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),_get=function e(t,n,s){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,s)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(s)},Segment=require("./segment");module.exports=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));n.segmentType="stacked",n.segments=e.segments||[],n.stackAllowance=e.stackAllowance||.25,n.segmentOffsets=[],n.segmentEndTimes=[];for(var s=0,r=0;r<n.segments.length;r++){n.segmentOffsets.push(s);var o=n.segments[r].getDuration();n.segmentEndTimes.push(s+o),s+=Math.random()*o*n.stackAllowance*2+o*(1-n.stackAllowance)}return n}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e,n){_get(Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),this.stackAllowance=e.stackAllowance;for(var s=0;s<e.segments.length;s++){var r=e.segments[s];this.segments.push(n?r.clone():r),this.segmentOffsets.push(e.segmentOffsets[s]),this.segmentEndTimes.push(e.segmentEndTimes[s])}return this}},{key:"clone",value:function(){return(new t).copy(this,!0)}},{key:"msSegmentOffset",value:function(e){return 1e3*this.segmentOffsets[e]}},{key:"getDuration",value:function(){return Math.max.apply(null,this.segmentEndTimes)}},{key:"lastSegment",value:function(){var e=Math.max.apply(null,this.segmentEndTimes),t=this.segmentEndTimes.indexOf(e)||this.segmentEndTimes.length-1;return this.segments[t]}}]),t}(Segment);

},{"./segment":19}],23:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_get=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(o)},Segment=require("./segment");module.exports=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,t));return n.segmentType="text",n.text=t.text||"",n.duration=t.duration||5,n.font=t.font||"Times New Roman",n.fontSize=t.fontSize||"24px",n.textAlignment=t.textAlignment||"left",n.color=t.color||"black",n.top=t.top,n.left=t.left,n.maxWidth=t.maxWidth,n.z=t.z||0,n.opacity=t.opacity||1,n}return _inherits(e,t),_createClass(e,[{key:"copy",value:function(t){return _get(Object.getPrototypeOf(e.prototype),"copy",this).call(this,t),this.text=t.text,this.duration=t.duration,this.font=t.font,this.fontSize=t.fontSize,this.textAlignment=t.textAlignment,this.color=t.color,this.top=t.top,this.left=t.left,this.maxWidth=t.maxWidth,this.z=t.z,this.opacity=t.opacity,this}},{key:"clone",value:function(){return new e({}).copy(this)}},{key:"setText",value:function(t){return this.text=t,this}},{key:"setDuration",value:function(t){return this.duration=t,this}},{key:"setFont",value:function(t){return this.font=t,this}},{key:"setFontSize",value:function(t){return this.fontSize=t,this}},{key:"setTextAlignment",value:function(t){return this.textAlignment=t,this}},{key:"setColor",value:function(t){return this.color=t,this}},{key:"setTop",value:function(t){return this.top=t,this}},{key:"setLeft",value:function(t){return this.left=t,this}},{key:"setMaxWidth",value:function(t){return this.maxWidth=t,this}},{key:"getDuration",value:function(){return this.duration}}]),e}(Segment);

},{"./segment":19}],24:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),_get=function e(t,i,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,a)}if("value"in n)return n.value;var u=n.get;if(void 0!==u)return u.call(a)},VisualSegment=require("./visual-segment"),AudioSegment=require("./audio-segment");module.exports=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return i.segmentType="video",i.audioFadeDuration=e.audioFadeDuration||0,i.videoFadeDuration=e.videoFadeDuration||0,i.audioHandleMedia=e.audioHandleMedia,i.audioHandleSegmentOptions=e.audioHandleSegmentOptions||{},i.audioHandleFadeDuration=e.audioHandleFadeDuration||.25,i.audioHandleStartTimeOffset=e.audioHandleStartTimeOffset||0,i.audioHandleMedia?i.volume=0:e.volume&&!isNaN(parseFloat(e.volume))?i.volume=e.volume:i.volume=1,i}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e){return _get(Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),this.audioFadeDuration=e.audioFadeDuration,this.videoFadeDuration=e.videoFadeDuration,this}},{key:"clone",value:function(){return new t({}).copy(this)}},{key:"setAudioFadeDuration",value:function(e){return this.audioFadeDuration=e,this}},{key:"setVideoFadeDuration",value:function(e){return this.videoFadeDuration=e,this}},{key:"setAudioHandleMedia",value:function(e){return this.audioHandleMedia=e,this.setVolume(0),this}},{key:"setAudioHandleFadeDuration",value:function(e){return this.audioHandleFadeDuration=e,this}},{key:"setAudioHandleStartTimeOffset",value:function(e){return this.audioHandleStartTimeOffset=e,this}},{key:"setVolume",value:function(e){return this.volume=e,this.notifyChangeHandlers("volume",e),this}},{key:"simpleName",value:function(){return"video - "+this.filename}},{key:"associatedSegments",value:function(){if(!this.audioHandleMedia)return null;var e=this.audioHandleSegmentOptions;for(var t in this.audioHandleMedia)this.audioHandleMedia.hasOwnProperty(t)&&(e[t]=this.audioHandleMedia[t]);var i=new AudioSegment(e);return i.setStartTime(this.startTime+this.audioHandleStartTimeOffset).setDuration(this.getDuration()+2*this.audioHandleFadeDuration).setFadeDuration(this.audioHandleFadeDuration).setPlaybackRate(this.playbackRate).setLoop(this.loop),[{segment:i,offset:-this.audioHandleFadeDuration}]}}]),t}(VisualSegment);

},{"./audio-segment":14,"./visual-segment":25}],25:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_get=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},MediaSegment=require("./media-segment");module.exports=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,t));return n.segmentType="visual",n.z=t.z||0,n.opacity=t.opacity||1,n.width=t.width,n.top=t.top,n.left=t.left,n}return _inherits(e,t),_createClass(e,[{key:"copy",value:function(t){return _get(Object.getPrototypeOf(e.prototype),"copy",this).call(this,t),this.z=t.z,this.opacity=t.opacity,this.width=t.width,this.left=t.left,this.top=t.top,this}},{key:"clone",value:function(){return new e({}).copy(this)}},{key:"setOpacity",value:function(t){return this.opacity=t,this.notifyChangeHandlers("opacity",t),this}},{key:"setLeft",value:function(t){return this.left=t,this.notifyChangeHandlers("left",t),this}},{key:"setTop",value:function(t){return this.top=t,this.notifyChangeHandlers("top",t),this}},{key:"setWidth",value:function(t){return this.width=t,this.notifyChangeHandlers("width",t),this}},{key:"setZ",value:function(t){return this.z=t,this.notifyChangeHandlers("z",t),this}}]),e}(MediaSegment);

},{"./media-segment":18}],26:[function(require,module,exports){
"use strict";var frampton=require("./frampton");frampton.WebRenderer=require("./renderer/web-renderer"),module.exports=frampton;

},{"./frampton":9,"./renderer/web-renderer":13}]},{},[4]);
